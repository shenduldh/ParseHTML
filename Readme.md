## HTML解析器——剖析Vue解析器实现原理

>本文根据Vue解析HTML形成AST树的源码，通过简化和改造，实现了一个非常简单的版本。整个代码将Vue解析器部分糅合在了一个函数内，简洁明了，只需将HTML文档作为唯一参数传入，便可将其进行解析，然后返回一个对应该文档的AST树。通过阅读本文，可以增加对Vue实现解析器的的理解。

### 实现思路

1. 从头开始解析文档，并将已解析的内容删除，不断循环，直至解析完所有内容。
2. 一次循环解析一个标签，同时创建父标签currentParnent和标签栈stack用于判断当前解析的标签在AST树中的层级。
3. 不同的标签采用不同的解析方法。这里将标签分为文本标签和元素标签，分别采用以下方法进行解析。
	- 元素标签：如果是无用标签（注释等），直接删除；如果是有用标签，又分为自闭合标签和非自闭合标签。
		- 自闭合标签：提取属性，设置为当前父标签的子标签，因为其本身不可能有子标签，所以无需压入栈中。
		- 非自闭合标签：继续分为开始标签和结束标签。
			- 开始标签：提取属性，设置为当前父标签的子标签，将该标签压入栈中。
			- 结束标签：与栈中的标签进行匹配，将匹配到的标签踢出栈中，并修改父标签。
	- 文本标签：提取文本内容，设置为当前父标签的子标签。

### 示例

- 将解析后的HTML还原为网页。

- 为了能看到效果，将每次还原设置了1s延迟。

- 使用方法：

	```
	npm install serve
	serve
	```

### 建议

1. 代码中有更加详细的注释，可以边参考实现思路，边看注释，一起理解。
2. 代码不长，可以放心阅读。
3. 也许有不对的地方，请理解！